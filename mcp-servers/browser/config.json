{
  "name": "playwright-browser",
  "description": "Secure Playwright MCP server for browser automation and web search",
  "version": "1.0.0",
  "type": "mcp_server",
  "capabilities": [
    "web_search",
    "browser_automation", 
    "page_interaction",
    "screenshot_capture",
    "pdf_generation"
  ],
  "security": {
    "authentication_required": true,
    "rate_limiting_enabled": true,
    "audit_logging_enabled": true,
    "input_validation_enabled": true,
    "tls_encryption_enabled": true
  },
  "browser_config": {
    "browser": "chromium",
    "headless": true,
    "viewport": {
      "width": 1280,
      "height": 720
    },
    "user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
    "timeout": 30000,
    "session_timeout": 300,
    "max_concurrent_pages": 5
  },
  "network_security": {
    "blocked_origins": [
      "malware.com",
      "phishing.com", 
      "ads.doubleclick.net",
      "tracker.com",
      "spam.com"
    ],
    "allowed_origins": [],
    "block_service_workers": true,
    "ignore_https_errors": false
  },
  "rate_limits": {
    "search_per_minute": 30,
    "navigation_per_minute": 20,
    "interaction_per_minute": 50,
    "screenshot_per_hour": 100
  },
  "permissions": {
    "browser.search": {
      "description": "Perform web searches using browser automation",
      "required_for": ["search_web"]
    },
    "browser.navigate": {
      "description": "Navigate to URLs and load web pages", 
      "required_for": ["navigate_to_url"]
    },
    "browser.interact": {
      "description": "Interact with page elements (click, type, etc.)",
      "required_for": ["interact_with_page", "click_element", "type_text"]
    },
    "browser.screenshot": {
      "description": "Take screenshots of web pages",
      "required_for": ["take_screenshot"]
    },
    "browser.admin": {
      "description": "Administrative browser operations",
      "required_for": ["get_server_status", "restart_browser"]
    }
  },
  "tools": [
    {
      "name": "search_web",
      "description": "Search the web using browser automation with multiple search engines",
      "parameters": {
        "query": {
          "type": "string",
          "description": "Search query",
          "required": true,
          "max_length": 1000
        },
        "max_results": {
          "type": "integer", 
          "description": "Maximum number of results",
          "default": 10,
          "min": 1,
          "max": 50
        },
        "search_engine": {
          "type": "string",
          "description": "Search engine to use",
          "enum": ["google", "bing", "duckduckgo"],
          "default": "google"
        }
      },
      "permissions": ["browser.search"]
    },
    {
      "name": "navigate_to_url", 
      "description": "Navigate to a specific URL",
      "parameters": {
        "url": {
          "type": "string",
          "description": "URL to navigate to",
          "required": true,
          "format": "url"
        },
        "timeout": {
          "type": "integer",
          "description": "Navigation timeout in seconds",
          "default": 30,
          "min": 5,
          "max": 300
        }
      },
      "permissions": ["browser.navigate"]
    },
    {
      "name": "interact_with_page",
      "description": "Interact with page elements",
      "parameters": {
        "action": {
          "type": "string", 
          "description": "Action to perform",
          "enum": ["click", "type", "select", "hover", "wait", "scroll"],
          "required": true
        },
        "target": {
          "type": "string",
          "description": "Element selector or description",
          "required": true,
          "max_length": 1000
        },
        "value": {
          "type": "string",
          "description": "Value for type/select actions",
          "max_length": 5000
        }
      },
      "permissions": ["browser.interact"]
    },
    {
      "name": "take_screenshot",
      "description": "Take a screenshot of the current page or element",
      "parameters": {
        "element": {
          "type": "string",
          "description": "Element selector to screenshot (optional)",
          "max_length": 1000
        },
        "full_page": {
          "type": "boolean",
          "description": "Take full page screenshot",
          "default": false
        },
        "format": {
          "type": "string",
          "description": "Image format",
          "enum": ["png", "jpeg"],
          "default": "png"
        }
      },
      "permissions": ["browser.screenshot"]
    },
    {
      "name": "get_server_status",
      "description": "Get browser server status and health information",
      "parameters": {},
      "permissions": ["browser.admin"]
    }
  ],
  "startup": {
    "command": "npx",
    "args": [
      "@playwright/mcp@latest",
      "--browser", "chromium",
      "--headless",
      "--isolated",
      "--block-service-workers",
      "--save-trace",
      "--output-dir", "./traces"
    ],
    "environment": {
      "PLAYWRIGHT_BROWSERS_PATH": "0"
    }
  },
  "integration": {
    "orchestrator_service": "../../services/orchestrator",
    "security_config": "../security/config.yaml",
    "audit_log_path": "../logs/browser_audit.log",
    "trace_output_dir": "./traces"
  }
}